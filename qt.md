# Qt 命名空间

用于存放全局枚举、标志位、常量和工具类型的一个命名空间 `Qt`，主要是避免全局名称冲突

这类标识符多为枚举或标志类型

- 枚举
    - 对齐方式
    - 排序方式
    - 窗口标志
    - 键盘按键
    - 鼠标按钮
- 标志位
- 输入设备相关常量
- 窗口和行为控制常量

> `Qt` 命名空间不包含类定义，类都在各模块中

```python
from PySide6.QtCore import Qt

Qt.AlignCenter
```

# 元对象系统

`Qt` 框架的核心机制，用于在运行时提供类型信息，对象通信和动态行为支持
是实现信号与槽，属性系统，反射，动态调用等功能的基础

- 功能
    - 信号与槽
    - 运行时类型信息
        - 类名
        - 信号列表
        - 属性列表
    - 属性系统
        - 属性可以被动态读取，修改
    - 动态调用(反射)
- 组成
    - `QObject` 基类
    - `Q_OBJECT` 宏
        - 负责声明元信息
    - `moc`
        - 编译期间生成元对象代码
- `Pyside6`
    - `python` 中不需要 `moc`，但是概念存在
    - 继承 `QObject` 就进入元对象系统
    - `signal / slot`

```python
from PySide6.QtCore import QObject, Signal

Class
MyObject(QObject):
valueChanged = Signal(int)
```

# 对象模型

`Qt` 对象模型关注的不是类继承而是对象关系
只要 `Qt` 中一个对象继承自 `QObject`，就可以有父对象和子对象，从而形成一棵树
这棵树完全动态生成的和类继承无关

### 所有权

父对象拥有子对象，父对象销毁时子对象会被自动销毁

建立所有权

- 构造函数传入 `parent`
- `setParent`
- 通过容器或布局间接建立，本质上还是使用 `setParent`

# 常用控件

### Qwidget

只有当前获得焦点的控件才能与用户交互
常见的控件默认策略为 `StrongFocus`，可以通过键盘和鼠标点击两种方式获得焦点
对于不需要与用户进行键盘输入交互的控件，焦点策略为 `NoFocus`

##### 焦点策略

- `TabFocus` 通过键盘 `Tab` 获取焦点
- `ClickFocus` 通过鼠标点击获取焦点
- `StrongFocus` 通过键盘 `Tab` 或鼠标点击
- `WheelFocus`  在 `StrongFocus` 基础上，支持 鼠标滚轮
    - 如果只有一个焦点设置此策略，需要当前焦点在这个控件的上一个或者下一个
- `NoFocus` 不接受焦点

### Button

##### QAbstractButton

按钮控件的基类

- 按钮类的通用方法
- 自身不能被实例化，子类可以被实例化

交互信号

- `clicked`
    - 光标在按钮上按下鼠标主键，并在不离开按钮前抬起
- `pressed`
    - 按下按钮
- `released`
    - 松开按钮
- `toggled`
    - 按钮状态改变时，单选框
- 按钮可以设置自动重复，按下不放时反复发射信号

快捷键

可以通过快捷键触发按钮点击操作

自动排他

一般主要用于单选按钮

### QFrame

边框控件的基类，主要用于分组分隔装饰界面元素，也可以作为其他控件的容器
继承自 `QWidget`

### QLineEdit

用户可以输入当行文本，默认自动支持常见的键盘操作

##### 显示模式

默认显示模式为正常，用户输入什么就显示什么
也可以将输入隐藏

##### 长度限制

可以限制用户输入的最大字符长度，如果长度超出限制会被再 `max` 处截断
如果设置掩码长度由掩码限制

##### 验证器和掩码

设置验证器，只有满足验证要求的字段才能输入
掩码是一种更为严格的验证方式，每一个字符都必须严格符合掩码要求的值

##### 自动补全

设置一个完成器，当用户输入和完成器中的某项接近时，可以给出补全提示

##### 自定义行为

可以在行首或行尾添加自定义的行为

### QLabel

用于界面上显示文字或者图片

##### 文本解析

可以将文本字符串解析为纯文本，`HTML` 或者 `Markdown`

##### 链接

默认行为发射 `linkActivated`，也可以指定默认浏览器打开

##### 标志

##### 显示其他类型

除了文本字符串还可以显示，数值类型，图像图形，动画

##### 伙伴关系

用于将 `Label` 和另一个可交互的控件关联起来
`Label` 作为说明文本，对应不关联一个输入控件

### QAbstractScrollArea

滚动区域的基类，提供了称为 viewport 的中央控件
本身包裹一个子控件，为这个子空间提供滚动条

##### 角落控件

右下角那一片空白区域，不属于任何滚动条

### QScrollArea

可以直接使用的滚动容器
